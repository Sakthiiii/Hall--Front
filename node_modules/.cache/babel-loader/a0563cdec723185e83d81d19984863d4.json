{"ast":null,"code":"import _defineProperty from\"C:/Users/ELCOT/Desktop/HallBooking/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:/Users/ELCOT/Desktop/HallBooking/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ELCOT/Desktop/HallBooking/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/ELCOT/Desktop/HallBooking/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/ELCOT/Desktop/HallBooking/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/ELCOT/Desktop/HallBooking/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/ELCOT/Desktop/HallBooking/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import axios from\"axios\";import{Form}from\"react-bootstrap\";import{withRouter}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var API_URL=\"https://hall-bookng.herokuapp.com/rooms\";var CreateRoom=/*#__PURE__*/function(_React$Component){_inherits(CreateRoom,_React$Component);var _super=_createSuper(CreateRoom);function CreateRoom(){var _this;_classCallCheck(this,CreateRoom);_this=_super.call(this);_this.componentDidMount=function(){return _this.getRooms();};_this.getRooms=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(API_URL);case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;_this.setState({rooms:data});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));_this.createRoom=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this$state,name,seats,config;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state=_this.state,name=_this$state.name,seats=_this$state.seats;config={method:\"post\",url:API_URL,headers:{\"Content-Type\":\"application/json\"},data:JSON.stringify({name:name,seats:seats})};axios(config).then(function(response){console.log(JSON.stringify(response.data));_this.props.history.push(\"/rooms\");}).catch(function(error){console.log(error);});case 3:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleChange=function(_ref3){var _ref3$target=_ref3.target,name=_ref3$target.name,value=_ref3$target.value;_this.setState(_defineProperty({},name,value));};_this.handleSubmit=function(e){e.preventDefault();_this.state.rooms.forEach(function(room){if(room.name==_this.state.name){_this.setState({view:false});}});if(_this.state.view)_this.createRoom();else _this.setState({message:\"Room name already exists\"});};_this.state={rooms:[],name:\"\",seats:\"\",view:true,message:\"\"};return _this;}_createClass(CreateRoom,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"To add a new room enter the details: \"}),/*#__PURE__*/_jsxs(Form,{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\" Name : \"}),\" \",/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",name:\"name\",value:this.state.name,onChange:this.handleChange}),\" \",this.state.view?\"\":/*#__PURE__*/_jsx(\"span\",{children:this.state.message}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"label\",{children:\" Seats : \"}),\" \",/*#__PURE__*/_jsx(\"input\",{required:true,type:\"number\",name:\"seats\",value:this.state.seats,onChange:this.handleChange}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"Submit\"})]}),\" \"]});}}]);return CreateRoom;}(React.Component);export default withRouter(CreateRoom);","map":{"version":3,"sources":["C:/Users/ELCOT/Desktop/HallBooking/Frontend/src/CreateRoom.js"],"names":["React","axios","Form","withRouter","API_URL","CreateRoom","componentDidMount","getRooms","get","data","setState","rooms","console","error","createRoom","state","name","seats","config","method","url","headers","JSON","stringify","then","response","log","props","history","push","catch","handleChange","target","value","handleSubmit","e","preventDefault","forEach","room","view","message","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { Form } from \"react-bootstrap\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst API_URL = \"https://hall-bookng.herokuapp.com/rooms\";\r\n\r\nclass CreateRoom extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      rooms: [],\r\n      name: \"\",\r\n      seats: \"\",\r\n      view: true,\r\n      message: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount = () => this.getRooms();\r\n\r\n  getRooms = async () => {\r\n    try {\r\n      const { data } = await axios.get(API_URL);\r\n      this.setState({ rooms: data });\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  createRoom = async () => {\r\n    const { name, seats } = this.state;\r\n    var config = {\r\n      method: \"post\",\r\n      url: API_URL,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      data: JSON.stringify({\r\n        name: name,\r\n        seats: seats,\r\n      }),\r\n    };\r\n\r\n    axios(config)\r\n      .then((response) => {\r\n        console.log(JSON.stringify(response.data));\r\n        this.props.history.push(\"/rooms\");\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  handleChange = ({ target: { name, value } }) => {\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.state.rooms.forEach((room) => {\r\n      if (room.name == this.state.name) {\r\n        this.setState({ view: false });\r\n      }\r\n    });\r\n    if (this.state.view) this.createRoom();\r\n    else this.setState({ message: \"Room name already exists\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <h3>To add a new room enter the details: </h3>\r\n        <Form onSubmit={this.handleSubmit}>\r\n          <label> Name : </label>{\" \"}\r\n          <input\r\n            required\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={this.state.name}\r\n            onChange={this.handleChange}\r\n          />{\" \"}\r\n          {this.state.view ? \"\" : <span>{this.state.message}</span>}\r\n          <br />\r\n          <br /> <label> Seats : </label>{\" \"}\r\n          <input\r\n            required\r\n            type=\"number\"\r\n            name=\"seats\"\r\n            value={this.state.seats}\r\n            onChange={this.handleChange}\r\n          />\r\n          <br /> <br />\r\n          <input type=\"Submit\" />\r\n        </Form>{\" \"}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(CreateRoom);\r\n"]},"metadata":{},"sourceType":"module"}